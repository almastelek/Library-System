{% extends "base.html" %}

{% block title %}{{ collection.title }}{% endblock %}

{% block content %}
<div class="container" style="max-width: 800px; margin: 50px auto; background-color: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);">
  <h1 style="color: #2c3e50;">{{ collection.title }}
    <span style="font-size: 0.8em; color: #7f8c8d; font-style: italic;">
      by {{ collection.created_by }}
    </span>
    </h1>
  <p style="color: #7f8c8d; margin-bottom: 20px;">{{ collection.description }}</p>

  {% if user == collection.created_by %}
    <a href="{% url 'edit_collection' collection.id %}">✏️ Edit</a>
    <a href="{% url 'delete_collection' collection.id %}">🗑️ Delete</a>
  {% endif %}

  {% if user.is_authenticated and user.profile.role == 'librarian' and collection.is_public == False%}
    <a href="{% url 'view_collection_access_requests' collection.id %}" style="margin-left: 20px; color: #3498db; text-decoration: none; font-weight: bold;">📥 View Access Requests</a>
  {% endif %}

  <form method = "get" action="">
    <label for="query" style="font-weight: bold; color: #2c3e50;">Search in this Collection:</label>
    <input type="text" id="query" name="query" placeholder="Enter keywords..." style="width: 100%; padding: 10px; margin-top: 10px; border: 1px solid #bdc3c7; border-radius: 5px;">
    <button type="submit" style="margin-top: 10px; padding: 10px 15px; background-color: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.3s ease;">
      Search
    </button>
  </form>
  <h2 style="color: #2c3e50;">Items in this Collection</h2>
  <ul style="list-style: none; padding: 0;">
    {% for item in items %}
      <li style="margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #ecf0f1;">
        <a href="{% url 'item_detail' item.id %}" style="color: #3498db; text-decoration: none; font-weight: bold; transition: color 0.3s ease;">
          {{ item.title }}</a> — {{ item.status }}
      </li>
    {% empty %}
      <li>No items in this collection.</li>
    {% endfor %}
  </ul>

  <a href="{% url 'view_collections' %}" class="back-link" style="display: inline-block; margin-top: 20px; color: #3498db; text-decoration: none; font-weight: bold;">← Back to Collections</a>
</div>
{% endblock %}
